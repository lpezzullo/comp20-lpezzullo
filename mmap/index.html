<!DOCTYPE html>
<html>
<head>
	<title>The Real Marauder's Map</title>
	<link rel="stylesheet" href="style.css" />
	<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
		<script>
			function solemnlySwear() {
				var myLat = 0;
				var myLng = 0;
				
				console.log("1. In getMyLocation()");
				if (navigator.geolocation) { // the navigator.geolocation object is supported on your browser
					navigator.geolocation.getCurrentPosition(function(position) {
							console.log("2. Finally got your location!");
							myLat = position.coords.latitude;
							myLng = position.coords.longitude;
							drawMap(myLat,myLng);
							console.log("Lat = " + myLat + ", Long = " + myLng);
							console.log("3. Leaving the function(position)...");
						});
				}
				else {
					alert("Geolocation is not supported by your web browser.  What a shame!");
				}
				console.log("4. Leaving getMyLocation(). Good bye cruel world!");
				
			}

			function drawMap(myLat, myLng)
			{
				console.log("Executing drawMap()");
				// My Location
				var landmark = new google.maps.LatLng(myLat,myLng);
			
				// Set up map
				var myOptions = {
					zoom: 13, // The larger the zoom number, the bigger the zoom
					center: landmark,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				
				// Create the map in the "map_canvas" <div>
				var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

				// Create a marker		
				var birdIcon = "me2.jpg";		
				var marker = new google.maps.Marker({
					position: landmark,
					title: "You are here!"
					icon: birdIcon;
				});
				marker.setMap(map);
				
				// This is a global info window...
				var infowindow = new google.maps.InfoWindow();
				
				// Open info window on click of marker
				google.maps.event.addListener(marker, 'click', function() {
					infowindow.setContent(marker.title);
					infowindow.open(map, marker);
				});
			}
		</script>
	</head>

	<body onload = "solemnlySwear()">
		<div id = "map-canvas">Getting your location...</div>
	</body>
</html>